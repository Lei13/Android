package com.android.prictice.json;

import java.io.IOException;
import java.io.InputStream;
import java.lang.ref.WeakReference;
import java.net.MalformedURLException;
import java.net.URL;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.widget.ImageView;

public class LoadPicUtil {
	

	
	public  class LoadAsyncTask extends AsyncTask<String, Void, Bitmap>{
	WeakReference<ImageView> imgReference;
	String data = "";
		public LoadAsyncTask(ImageView image){
			imgReference = new WeakReference<ImageView>(image);
		}
		
		
		@Override
		protected Bitmap doInBackground(String... params) {
			data = params[0];
			return getPicByUrl(data);
		}
		
		
		@Override
		protected void onPostExecute(Bitmap result) {
			if (isCancelled()) {
				result = null;
			}
			
		}
		private Bitmap getPicByUrl(String url) {
			try {
				URL picUrl = new URL(url);
				InputStream in = picUrl.openStream();

				return BitmapFactory.decodeStream(in);
			} catch (MalformedURLException e) {
				e.printStackTrace();
			} catch (IOException e) {
				e.printStackTrace();
			}

			return null;
		}
	}
}
